<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.147.6"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>RWX Storage Class - EWW | ITandTEL Cloud Docs</title><link href=/css/nucleus.css?1748457310 rel=stylesheet><link href=/css/fontawesome-all.min.css?1748457310 rel=stylesheet><link href=/css/hybrid.css?1748457310 rel=stylesheet><link href=/css/featherlight.min.css?1748457310 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1748457310 rel=stylesheet><link href=/css/auto-complete.css?1748457310 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1748457310 rel=stylesheet><link href=/css/theme.css?1748457310 rel=stylesheet><link href=/css/tabs.css?1748457310 rel=stylesheet><link href=/css/hugo-theme.css?1748457310 rel=stylesheet><link href=/css/theme-mine.css?1748457310 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1748457310></script><style>:root #header+#content>#left>#rlblock_left{display:none !important}</style></head><body data-url=/products/kubernetes/rwx-storage-class/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="206" height="52" viewBox="0 0 206 52" style="enable-background:new 0 0 206 52"><g id="Ebene_1"><g><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1=".01953125" y1="15.1895" x2="119.8848" y2="15.1895"><stop offset="0" style="stop-color:#00AEEF"/><stop offset="1" style="stop-color:#0079C1"/></linearGradient><path style="fill:#fff" d="M116.9 1.7l-6.2 13.5c-1.5 3.1-2.3 4.8-4.1 4.9-1.7-.1-2-1.5-2.5-4.9l-1-8.9c-.3-2.2-.7-5.6-3.8-5.6-3 0-4.5 3.2-5.5 5.5l-4.2 9c-1.5 3.1-2.3 4.8-4.1 4.9-1.7-.1-2-1.5-2.5-4.9l-1-8.9c-.3-2.2-.7-5.6-3.8-5.6-3 0-4.5 3.2-5.5 5.5l-4.2 9c-1.5 3.1-2.3 4.8-4.1 4.9-1.7-.1-2-1.5-2.5-4.9l-1-8.9c-.3-2.2-.7-5.6-3.8-5.6-3 0-4.5 3.2-5.6 5.5l-4.2 9c-1.5 3.1-2.3 4.8-4.1 4.9-1.7-.1-2-1.5-2.5-4.9l-1-8.9c-.3-2.2-.7-5.6-3.8-5.6-3.4.0-4.9 4.1-6 6.6-3.3 7.3-6.7 16.5-16 17.3-3.6.2-7.5-1.1-9-4.6-1.6-3.7-.3-7.9 2.3-10.8 2.1-2.3 5.5-4.3 8.8-4 2.6.3 3.7 2.8 3.2 5.1-.6 3.1-3.5 5.6-6.7 4.8-.6-.1-1.3-.6-2-.5-.8.1-1.3 1.1-1.4 1.9-.1 1.5 1 2.5 2.4 2.8 7.3 1.3 15.4-9.4 12-16.1-1.2-2.4-3.5-3.3-6-3.3h-.1c-2.8.0-5.9 1.1-7.9 2.4C4.3 5.6.0 11.8.0 18.2v.1c0 1.2.1 2.3.5 3.5 1.9 7.4 10 10 16.6 7.8 7.1-2.4 10.1-9.4 13.1-15.5.7-1.4 1.6-3.7 3.5-3.7 1.7.0 2.1 1.5 2.5 4.9l1 8.9c.3 2.2.7 5.6 3.8 5.6 3 0 4.5-3.2 5.6-5.5l4.2-9c1.5-3.1 2.3-4.8 4.1-4.9 1.7.0 2.1 1.5 2.5 4.9l1 8.9c.3 2.2.7 5.6 3.8 5.6 3 0 4.5-3.2 5.6-5.5l4.2-9c1.5-3.1 2.3-4.8 4.1-4.9 1.8.0 2.1 1.5 2.5 4.9l1 8.9c.3 2.2.7 5.6 3.8 5.6 3 0 4.5-3.2 5.5-5.5l4.2-9c1.5-3.1 2.3-4.8 4.1-4.9 1.7.0 2.1 1.5 2.5 4.9l1 8.9c.3 2.2.7 5.6 3.8 5.6 3 0 4.5-3.2 5.5-5.5l9.7-21.4C120.6.9 117.8-.1 116.9 1.7z"/><g><path style="fill:#fff" d="M73.8 49.1 76.1 38H78l-2.3 11.1H73.8z"/><path style="fill:#fff" d="M84.6 39.8l-2 9.3h-1.9l2-9.3h-3.5l.4-1.8h8.7l-.4 1.8H84.6z"/><path style="fill:#fff" d="M94.5 41.5l-1.2 5.8c-.1.5-.2.9-.2 1.4.0.1.0.2.0.4h-1.7c0-.1.0-.2.0-.3.0-.2.0-.3.0-.6-.4.6-1.1 1.1-2.1 1.1-1.9.0-3-1.5-3-3.4.0-2.5 1.7-4.6 3.9-4.6 1.4.0 2 .6 2.3 1.1l.2-.9h1.8zm-6.3 4.3c0 1.1.6 1.9 1.6 1.9 1.2.0 2.2-1.2 2.2-3 0-1-.5-1.8-1.6-1.8-1.5.0-2.2 1.6-2.2 2.9z"/><path style="fill:#fff" d="M100.1 49.1l1-4.5c0-.2.1-.3.1-.5.0-.8-.5-1.2-1.3-1.2-1 0-1.6.9-1.8 1.8l-1 4.4h-1.8l1.3-6.3c.2-.7.2-1.2.2-1.3h1.8c0 .1.0.5-.1.8.5-.7 1.4-1 2.3-1 1.4.0 2.3 1 2.3 2.4.0.2.0.6-.1.8l-1 4.6H100.1z"/><path style="fill:#fff" d="M111.1 47.3c-.1.6-.2 1.1-.2 1.4.0.0.0.3.0.4h-1.7c0-.1.0-.3.0-.4.0-.2.0-.4.0-.5-.4.6-1.1 1.1-2.1 1.1-1.9.0-3-1.5-3-3.4.0-2.5 1.7-4.6 3.9-4.6 1.3.0 2 .6 2.3 1.1l1-4.6h1.8l-2 9.5zM106 45.8c0 1.1.6 1.9 1.6 1.9 1.2.0 2.2-1.2 2.2-3 0-1-.5-1.8-1.6-1.8C106.8 42.9 106 44.5 106 45.8z"/><path style="fill:#fff" d="M119.4 39.8l-2 9.3h-1.9l2-9.3H114l.4-1.8h8.7l-.4 1.8h-3.3z"/><path style="fill:#fff" d="M122.3 49.1l2.3-11.1h6.8l-.4 1.8h-4.9l-.6 2.9h4.5l-.4 1.7h-4.4l-.6 2.9h4.9l-.4 1.8h-6.8z"/><path style="fill:#fff" d="M131.3 49.1l2.3-11.1h1.9l-2 9.3h4.9l-.4 1.8H131.3z"/></g></g></g><g id="nyt_x5F_exporter_x5F_info" style="display:none"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1748457310></script><script type=text/javascript src=/js/auto-complete.js?1748457310></script><script type=text/javascript>var baseurl="https://docs.ventuscloud.eu/"</script><script type=text/javascript src=/js/search.js?1748457310></script></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/getting-started/ title="Getting Started" class=dd-item><a href=/getting-started/><b>1. </b>Getting Started</a><ul><li data-nav-id=/getting-started/account/ title=Account class=dd-item><a href=/getting-started/account/>Account</a></li><li data-nav-id=/getting-started/organizations/ title=Organizations class=dd-item><a href=/getting-started/organizations/>Organizations</a></li><li data-nav-id=/getting-started/projects/ title=Projects class=dd-item><a href=/getting-started/projects/>Projects</a></li></ul></li><li data-nav-id=/identity-management/ title="Identity Management" class=dd-item><a href=/identity-management/><b>2. </b>Identity Management</a><ul><li data-nav-id=/identity-management/administrators/ title=Administrators class=dd-item><a href=/identity-management/administrators/>Administrators</a></li><li data-nav-id=/identity-management/groups/ title=Groups class=dd-item><a href=/identity-management/groups/>Groups</a></li></ul></li><li data-nav-id=/products/ title=Products class="dd-item
parent"><a href=/products/><b>3. </b>Products</a><ul><li data-nav-id=/products/compute/ title=COMPUTE class=dd-item><a href=/products/compute/><b></b>COMPUTE</a><ul><li data-nav-id=/products/compute/virtual-machines/ title="Virtual Machines" class=dd-item><a href=/products/compute/virtual-machines/>Virtual Machines</a></li><li data-nav-id=/products/compute/gpu-virtual-machines/ title="GPU Virtual Machines" class=dd-item><a href=/products/compute/gpu-virtual-machines/>GPU Virtual Machines</a></li><li data-nav-id=/products/compute/connect-linux-vm/ title="Access Linux VM" class=dd-item><a href=/products/compute/connect-linux-vm/>Access Linux VM</a></li><li data-nav-id=/products/compute/connect-windows-vm/ title="Access Windows VM" class=dd-item><a href=/products/compute/connect-windows-vm/>Access Windows VM</a></li></ul></li><li data-nav-id=/products/kubernetes/ title=KUBERNETES class="dd-item
parent"><a href=/products/kubernetes/><b></b>KUBERNETES</a><ul><li data-nav-id=/products/kubernetes/kubernetes-cluster/ title="K8S Cluster" class=dd-item><a href=/products/kubernetes/kubernetes-cluster/>K8S Cluster</a></li><li data-nav-id=/products/kubernetes/accessing-kuber/ title="Access K8S Cluster" class=dd-item><a href=/products/kubernetes/accessing-kuber/>Access K8S Cluster</a></li><li data-nav-id=/products/kubernetes/rwx-storage-class/ title="RWX Storage Class" class="dd-item active"><a href=/products/kubernetes/rwx-storage-class/>RWX Storage Class</a></li></ul></li><li data-nav-id=/products/databases/ title=DATABASES class=dd-item><a href=/products/databases/><b></b>DATABASES</a><ul><li data-nav-id=/products/databases/databases/ title=Databases class=dd-item><a href=/products/databases/databases/>Databases</a></li><li data-nav-id=/products/databases/database-custom-options/ title="Database's Custom Options" class=dd-item><a href=/products/databases/database-custom-options/>Database's Custom Options</a></li><li data-nav-id=/products/databases/database-replicas/ title="Database's Replicas" class=dd-item><a href=/products/databases/database-replicas/>Database's Replicas</a></li><li data-nav-id=/products/databases/database_backups/ title="Database's Backups" class=dd-item><a href=/products/databases/database_backups/>Database's Backups</a></li><li data-nav-id=/products/databases/database-management/ title="Database Management" class=dd-item><a href=/products/databases/database-management/>Database Management</a></li><li data-nav-id=/products/databases/database-user-management/ title="User Management" class=dd-item><a href=/products/databases/database-user-management/>User Management</a></li></ul></li><li data-nav-id=/products/security/ title=SECURITY class=dd-item><a href=/products/security/><b></b>SECURITY</a><ul><li data-nav-id=/products/security/firewalls/ title=Firewalls class=dd-item><a href=/products/security/firewalls/>Firewalls</a></li><li data-nav-id=/products/security/firewall-rules/ title="Firewall Rules" class=dd-item><a href=/products/security/firewall-rules/>Firewall Rules</a></li><li data-nav-id=/products/security/manage-firewalls/ title="VM's Firewalls" class=dd-item><a href=/products/security/manage-firewalls/>VM's Firewalls</a></li><li data-nav-id=/products/security/ssh-keys/ title="SSH Keys" class=dd-item><a href=/products/security/ssh-keys/>SSH Keys</a></li><li data-nav-id=/products/security/cli-users/ title="CLI Users" class=dd-item><a href=/products/security/cli-users/>CLI Users</a></li></ul></li><li data-nav-id=/products/storage/ title=STORAGE class=dd-item><a href=/products/storage/><b></b>STORAGE</a><ul><li data-nav-id=/products/storage/volumes/ title=Volumes class=dd-item><a href=/products/storage/volumes/>Volumes</a></li><li data-nav-id=/products/storage/manage-volumes/ title="VM's Volumes" class=dd-item><a href=/products/storage/manage-volumes/>VM's Volumes</a></li><li data-nav-id=/products/storage/snapshots/ title=Snapshots class=dd-item><a href=/products/storage/snapshots/>Snapshots</a></li><li data-nav-id=/products/storage/manage-snapshots/ title="VM's Snapshots" class=dd-item><a href=/products/storage/manage-snapshots/>VM's Snapshots</a></li><li data-nav-id=/products/storage/object-storage-credentials/ title="Object Storage Credentials" class=dd-item><a href=/products/storage/object-storage-credentials/>Object Storage Credentials</a></li><li data-nav-id=/products/storage/integrated-s3-browser/ title="Integrated S3-Browser" class=dd-item><a href=/products/storage/integrated-s3-browser/>Integrated S3-Browser</a></li><li data-nav-id=/products/storage/object-storage-clients/ title="Object Storage Clients" class=dd-item><a href=/products/storage/object-storage-clients/>Object Storage Clients</a></li></ul></li><li data-nav-id=/products/images/ title=IMAGES class=dd-item><a href=/products/images/><b></b>IMAGES</a><ul><li data-nav-id=/products/images/custom-images/ title=Images class=dd-item><a href=/products/images/custom-images/>Images</a></li><li data-nav-id=/products/images/image-from-snapshot/ title="Create Image from Snapshot" class=dd-item><a href=/products/images/image-from-snapshot/>Create Image from Snapshot</a></li><li data-nav-id=/products/images/share-images/ title="Share Images between Projects" class=dd-item><a href=/products/images/share-images/>Share Images between Projects</a></li><li data-nav-id=/products/images/transfer-images/ title="Transfer Images between Regions" class=dd-item><a href=/products/images/transfer-images/>Transfer Images between Regions</a></li></ul></li><li data-nav-id=/products/networking/ title=NETWORKING class=dd-item><a href=/products/networking/><b></b>NETWORKING</a><ul><li data-nav-id=/products/networking/networks/ title=Networks class=dd-item><a href=/products/networking/networks/>Networks</a></li><li data-nav-id=/products/networking/floating-ips/ title="Floating IPs" class=dd-item><a href=/products/networking/floating-ips/>Floating IPs</a></li><li data-nav-id=/products/networking/routers/ title=Routers class=dd-item><a href=/products/networking/routers/>Routers</a></li><li data-nav-id=/products/networking/subnets/ title=Subnets class=dd-item><a href=/products/networking/subnets/>Subnets</a></li><li data-nav-id=/products/networking/manage-networks/ title="VM's Networks and Interfaces" class=dd-item><a href=/products/networking/manage-networks/>VM's Networks and Interfaces</a></li></ul></li></ul></li><li data-nav-id=/tutorials-advanced/ title=Advanced class=dd-item><a href=/tutorials-advanced/><b>4. </b>Advanced</a><ul><li data-nav-id=/tutorials-advanced/installation-openstack-cli/ title="Installation OpenStack CLI" class=dd-item><a href=/tutorials-advanced/installation-openstack-cli/>Installation OpenStack CLI</a></li><li data-nav-id=/tutorials-advanced/working-with-openstack-api/ title="Working with OpenStack API" class=dd-item><a href=/tutorials-advanced/working-with-openstack-api/>Working with OpenStack API</a></li><li data-nav-id=/tutorials-advanced/org-management--over-api/ title="Organization's management over API" class=dd-item><a href=/tutorials-advanced/org-management--over-api/>Organization's management over API</a></li><li data-nav-id=/tutorials-advanced/advanced-network-scenarios/ title="Advanced network scenarios" class=dd-item><a href=/tutorials-advanced/advanced-network-scenarios/>Advanced network scenarios</a></li><li data-nav-id=/tutorials-advanced/site-to-site-ipsec-vpn/ title="The Site to Site IPSec VPN" class=dd-item><a href=/tutorials-advanced/site-to-site-ipsec-vpn/>The Site to Site IPSec VPN</a></li></ul></li><li data-nav-id=/iac/ title="Infrastructure as code" class=dd-item><a href=/iac/><b>5. </b>Infrastructure as code</a><ul><li data-nav-id=/iac/pulumi/ title=Pulumi class=dd-item><a href=/iac/pulumi/>Pulumi</a></li><li data-nav-id=/iac/terraform/ title=Terraform class=dd-item><a href=/iac/terraform/>Terraform</a></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Home Page</a> > <a href=/products/>Products</a> > <a href=/products/kubernetes/>KUBERNETES</a> > RWX Storage Class</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#why-seaweedfs-for-rwx-storage>Why SeaweedFS for RWX Storage?</a></li><li><a href=#seaweedfs-components>SeaweedFS Components</a></li><li><a href=#non-ha-vs-ha>Non-HA vs. HA</a><ul><li><a href=#non-ha-setup>Non-HA Setup</a></li><li><a href=#ha-setup>HA Setup</a></li></ul></li><li><a href=#installing-seaweedfs-and-the-csi-driver>Installing SeaweedFS and the CSI Driver</a></li><li><a href=#testing-rwx-storage>Testing RWX Storage</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>RWX Storage Class</h1><hr><p>On this page, you can find an explanation of how to access your Kubernetes cluster and configure ReadWriteMany (RWX) storage using SeaweedFS.</p><h1 id=table-of-contents>Table of contents</h1><ul><li><a href=#configuring-seaweedfs-as-rwx-storage-in-kubernetes>Configuring SeaweedFS as RWX Storage in Kubernetes</a><ul><li><a href=#why-seaweedfs-for-rwx-storage>Why SeaweedFS for RWX Storage?</a></li><li><a href=#seaweedfs-components>SeaweedFS Components</a></li><li><a href=#non-ha-vs-ha>Non-HA vs. HA</a></li><li><a href=#installing-seaweedfs-and-the-csi-driver>Installing SeaweedFS and the CSI Driver</a></li><li><a href=#testing-rwx-storage>Testing RWX Storage</a></li></ul></li></ul><h1 id=configuring-seaweedfs-as-rwx-storage-in-kubernetes>Configuring SeaweedFS as RWX Storage in Kubernetes</h1><p>This guide walks you through setting up SeaweedFS as an NFS-like RWX (ReadWriteMany) storage solution in a Kubernetes cluster. We’ll cover:</p><ul><li>What SeaweedFS is and why it’s used</li><li>Non-HA (single-replica) vs. HA (multi-replica) configurations</li><li>The roles of the Master, Volume servers, and Filer</li><li>Installing and configuring SeaweedFS and its CSI driver</li><li>Testing your RWX storage with real applications</li><li>Production recommendations (e.g., resource limits, scaling, etc.)</li></ul><h2 id=why-seaweedfs-for-rwx-storage>Why SeaweedFS for RWX Storage?</h2><p><strong>RWX (ReadWriteMany)</strong> storage classes allow multiple pods to read and write to the same persistent volume simultaneously. This is essential for workloads that share state or content, such as web applications serving identical static content or workloads that must scale horizontally without losing access to shared data.</p><p>While traditional solutions like NFS servers or managed cloud file systems are available, <strong>SeaweedFS</strong> stands out for its:</p><ul><li><strong>Scalability</strong>: Designed to handle billions of files efficiently.</li><li><strong>Simplicity</strong>: Easier to set up compared to many distributed block storage solutions.</li><li><strong>Performance</strong>: SeaweedFS provides near O(1) disk seek for small files, and can handle large amounts of data.</li><li><strong>Flexibility</strong>: Supports replication, making it easy to achieve a highly available (HA) setup.</li></ul><h2 id=seaweedfs-components>SeaweedFS Components</h2><p><strong>Master</strong>:
Coordinates the cluster and stores metadata about volume locations. A single master can run for a basic setup. For HA, multiple masters (usually 3) are used to form a consensus group. The metadata stored here is relatively small compared to actual file data.</p><p><strong>Volume Server(s)</strong>:
Store the actual file data in &ldquo;volumes.&rdquo; You can have one volume server for a non-HA setup, or multiple for redundancy. Volume servers can replicate data according to your replication policy (e.g., &ldquo;001&rdquo; for one additional copy).</p><p><strong>Filer</strong>:
The Filer provides a filesystem interface on top of volume servers. It manages directories and file metadata. The Filer is what you point your CSI driver at to gain NFS-like RWX semantics. Typically, the Filer stores minimal metadata compared to the raw data in volumes.</p><h2 id=non-ha-vs-ha>Non-HA vs. HA</h2><h3 id=non-ha-setup>Non-HA Setup</h3><ul><li><strong>Single Master, Single Volume Server, Single Filer</strong></li><li>Simpler and uses fewer resources</li><li>Recommended for development or testing</li><li>If the Master or Volume server fails, the data or metadata may become unavailable</li><li>Example: A single replica of each component (master, volume, filer) with no replication.</li></ul><h3 id=ha-setup>HA Setup</h3><ul><li><strong>Multiple Masters (e.g., 3), Multiple Volume Servers (e.g., 2), Multiple Filer Replicas</strong></li><li>Set replication policies (e.g., <code>001</code>) for automatic data redundancy</li><li>Failover capabilities: If one Master or Volume server fails, others take over</li><li>Ideal for production environments</li><li>Supports horizontal scaling</li><li>More complex and resource-intensive, but provides continuous availability</li></ul><p><strong>Production Recommendations:</strong></p><ul><li>Set resource limits on Master, Volume, and Filer pods to ensure stable performance.</li><li>Use replication settings like <code>001</code> to maintain availability during node failures.</li><li>Employ liveness and readiness probes to ensure pods self-heal.</li><li>Allocate PVC sizes thoughtfully:<ul><li>Master & Filer PVCs can be relatively small (a few Gi), as they store metadata.</li><li>Volume servers need larger PVCs depending on your data requirements (e.g., 100Gi or more).</li></ul></li><li>Consider using multiple replicas of each component and robust StorageClasses.</li></ul><h2 id=installing-seaweedfs-and-the-csi-driver>Installing SeaweedFS and the CSI Driver</h2><ol><li><p><strong>Add Repositories and Update:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo add seaweedfs https://seaweedfs.github.io/seaweedfs/helm
</span></span><span style=display:flex><span>helm repo add seaweedfs-csi-driver https://seaweedfs.github.io/seaweedfs-csi-driver/helm
</span></span><span style=display:flex><span>helm repo update
</span></span></code></pre></div></li><li><p><strong>Deploying a Non-HA Setup (for testing):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm upgrade --install seaweedfs seaweedfs/seaweedfs --create-namespace --namespace seaweedfs <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set global.enableSecurity<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set global.enableReplication<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.enabled<span style=color:#f92672>=</span>true <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.defaultReplication<span style=color:#f92672>=</span><span style=color:#ae81ff>000</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.data.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.data.size<span style=color:#f92672>=</span>2Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.logs.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.logs.size<span style=color:#f92672>=</span>1Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.enabled<span style=color:#f92672>=</span>true <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.dataDirs<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.name<span style=color:#f92672>=</span>data1 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.dataDirs<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.dataDirs<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.size<span style=color:#f92672>=</span>50Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.enabled<span style=color:#f92672>=</span>true <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.defaultReplicaPlacement<span style=color:#f92672>=</span><span style=color:#ae81ff>000</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.data.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.data.size<span style=color:#f92672>=</span>10Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.logs.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.logs.size<span style=color:#f92672>=</span>1Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.s3.enabled<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set s3.enabled<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set cosi.enabled<span style=color:#f92672>=</span>false
</span></span></code></pre></div></li><li><p><strong>Deploying a HA Setup (for production):</strong></p><p>&ndash;set volume.dataDirs[0].size=100Gi - Adjust as needed</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm upgrade --install seaweedfs seaweedfs/seaweedfs --create-namespace --namespace seaweedfs <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set global.enableSecurity<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set global.enableReplication<span style=color:#f92672>=</span>true <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set global.replicationPlacment<span style=color:#f92672>=</span><span style=color:#ae81ff>001</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.enabled<span style=color:#f92672>=</span>true <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.defaultReplication<span style=color:#f92672>=</span><span style=color:#ae81ff>001</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.data.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.data.size<span style=color:#f92672>=</span>2Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.logs.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set master.logs.size<span style=color:#f92672>=</span>1Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.enabled<span style=color:#f92672>=</span>true <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.dataDirs<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.name<span style=color:#f92672>=</span>data1 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.dataDirs<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set volume.dataDirs<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.size<span style=color:#f92672>=</span>100Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.enabled<span style=color:#f92672>=</span>true <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.defaultReplicaPlacement<span style=color:#f92672>=</span><span style=color:#ae81ff>001</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.data.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.data.size<span style=color:#f92672>=</span>10Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.logs.type<span style=color:#f92672>=</span>persistentVolumeClaim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.logs.size<span style=color:#f92672>=</span>1Gi <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set filer.s3.enabled<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set s3.enabled<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set cosi.enabled<span style=color:#f92672>=</span>false
</span></span></code></pre></div></li><li><p><strong>Deploy the SeaweedFS CSI Driver:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm upgrade --install seaweedfs-csi seaweedfs-csi-driver/seaweedfs-csi-driver --namespace seaweedfs <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> --set seaweedfsFiler<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;seaweedfs-filer:8888&#34;</span>
</span></span></code></pre></div><p>Now you have a seaweedfs-storage StorageClass that supports RWX.</p></li></ol><h2 id=testing-rwx-storage>Testing RWX Storage</h2><ol><li><p><strong>Test with BusyBox</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>---
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: PersistentVolumeClaim
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: nfs-test
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  accessModes:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - ReadWriteMany
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  resources:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    requests:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      storage: 10Gi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  storageClassName: seaweedfs-storage
</span></span></span><span style=display:flex><span><span style=color:#e6db74>---
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: apps/v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Deployment
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: nfs-demo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: nfs-busybox
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  replicas: 5
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  selector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      app: nfs-demo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  template:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        app: nfs-demo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      volumes:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - name: nfs-test-vol
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        persistentVolumeClaim:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          claimName: nfs-test
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      terminationGracePeriodSeconds: 5
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      containers:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - image: busybox
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        imagePullPolicy: IfNotPresent
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        name: busybox
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        volumeMounts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        - name: nfs-test-vol
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          mountPath: &#34;/mnt&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        command:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          - sh 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          - -c
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          - |
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            while true; do
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              echo &#34;\$(date) \$(hostname)&#34; &gt; /mnt/shared.log
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              sleep $(($RANDOM % 5 + 5))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            done
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p>Check any BusyBox pod’s log file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl exec -it <span style=color:#66d9ef>$(</span>kubectl get pod -l app<span style=color:#f92672>=</span>nfs-demo -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.items[0].metadata.name}&#39;</span><span style=color:#66d9ef>)</span> -- cat /mnt/shared.log
</span></span></code></pre></div><p>You should see entries from multiple pod hostnames, confirming RWX functionality.</p></li></ol><p>This documentation provides a robust framework for deploying and testing SeaweedFS as an RWX solution in Kubernetes. For additional customization or troubleshooting, refer to the <a href=https://github.com/seaweedfs/seaweedfs>SeaweedFS documentation</a>.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/products/kubernetes/accessing-kuber/ title="Access K8S Cluster"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/products/databases/ title=DATABASES style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1748457310></script><script src=/js/perfect-scrollbar.min.js?1748457310></script><script src=/js/perfect-scrollbar.jquery.min.js?1748457310></script><script src=/js/jquery.sticky.js?1748457310></script><script src=/js/featherlight.min.js?1748457310></script><script src=/js/highlight.pack.js?1748457310></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1748457310></script><script src=/js/learn.js?1748457310></script><script src=/js/hugo-learn.js?1748457310></script><script src=/mermaid/mermaid.js?1748457310></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-105947713-1","auto"),ga("send","pageview")</script></body></html>